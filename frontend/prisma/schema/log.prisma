model SystemHistory {
  id          String    @id @default(cuid())
  action      String    // 'CREATE', 'UPDATE', 'DELETE', 'DRAFT', 'PUBLISHED', 'ROLLBACK'
  entityType  String    // 'User', 'SystemInfo', 'EnvironmentInfo', etc.
  entityId    String    // ID ของ record ที่ถูกกระทำ
  version     Int?      // ใช้เฉพาะกรณี versioning (เช่น SystemInfo)
  changes     Json?     // เก็บข้อมูลการเปลี่ยนแปลง { old: {}, new: {} }
  userId      String
  user        User      @relation(fields: [userId], references: [id])
  
  // Add new relation field
  systemInfo  SystemInfo @relation(fields: [entityId], references: [id])
  lastActive  DateTime @default(now())
  userAgent   String?   @db.VarChar(255)
  ipAddress   String?   @db.VarChar(50)
  createdAt   DateTime  @default(now())

  @@index([entityId])
  @@schema("log")
}




